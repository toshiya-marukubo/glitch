<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: glitch-version-prototype.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: glitch-version-prototype.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @class - glitch class
 * @param {number} width - canvas width
 * @param {number} height - canvas height
 * @param {number} min - split min number
 * @param {number} max - split max number
 */
function Glitch(ctx, width, height, min, max) {
  this.ctx = ctx;
  this.width = width;
  this.height = height;
  this.min = min;
  this.max = max;
  this.imageArr = [];
  this.heightArr = [];
}

/**
 * Get splited image datas.
 * @param {number} t - time
 */
Glitch.prototype.getImageData = function(t) {
  let preHeight = 0;
  let addHeight = 0;
  
  for (let i = 0; i &lt; this.height; i += addHeight) {
    addHeight = Math.floor((this.max - this.min) * Math.random() + this.min);

    let image = this.ctx.getImageData(0, preHeight, this.width, preHeight + addHeight);

    this.dataArr.push(image);
    this.heightArr.push(preHeight);

    preHeight += addHeight
  }
};

/**
 * Add images on canvas.
 * @param {number} t - time
 */
Glitch.prototype.addImage = function(t) {
  for (let i = 0; i &lt; this.dataArr.length ; i++) {
    if (Math.random() > 0.005) {
      this.ctx.putImageData(
        this.dataArr[i],
        Math.sin(this.heightArr[i] * 0.1 + t) * 3 * Math.random(),
        this.heightArr[i]
      );
    } else {
      this.ctx.putImageData(
        this.dataArr[Math.floor(this.dataArr.length * Math.random())],
        this.width * Math.random() - this.width / 2,
        this.heightArr[i]
      );
    }
  }
};

/**
 * Render images.
 * @param {number} t - time
 */
Glitch.prototype.render = function(t) {
  this.dataArr = [];
  this.heightArr = [];
  this.getImageData(t);
  this.addImage(t);
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Glitch.html">Glitch</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Mon Nov 29 2021 16:51:42 GMT+0900 (日本標準時)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
